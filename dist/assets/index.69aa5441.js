import{P as v,O as b,V as u,a as x,M as p,C as k,b as n,S as P,A as T,D as L,c as z,T as o,R as g,B as y,d as m,e as h,f as _,W as M,g as O}from"./vendor.cdde80ee.js";const C=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function l(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(e){if(e.ep)return;e.ep=!0;const s=l(e);fetch(e.href,s)}};C();class B extends v{constructor(t){const r=window.innerWidth/window.innerHeight,e=.1,s=9999999;super(75,r,e,s);this.position.set(t.x,t.y,t.z)}}class J extends b{constructor(){super();this.camera=new B(new u(0,1.4,0)),this.controls=new x(this.camera,document.body),this.velocity=new u(0,0,0),this.speed=.1,this.body=new p(new k(.5,.5,1.5,30),new n({color:16777215})),this.body.position.set(5,.75,5),this.body.castShadow=!0,this.add(this.body)}update(){this.controls.moveRight(this.velocity.x*this.speed),this.controls.moveForward(this.velocity.y*this.speed),this.body.position.copy(this.camera.position)}}var R="/ThreeJS-First-FPS/assets/sh_ft.7e4b437c.png",W="/ThreeJS-First-FPS/assets/sh_bk.ba8945d2.png",A="/ThreeJS-First-FPS/assets/sh_up.8b1772cc.png",D="/ThreeJS-First-FPS/assets/sh_dn.5668b7db.png",E="/ThreeJS-First-FPS/assets/sh_lf.2e09e1e7.png",H="/ThreeJS-First-FPS/assets/sh_rt.14aef1bb.png",V="/ThreeJS-First-FPS/assets/grassTile.2ca22b35.png";class q extends P{constructor(){super();this.ambientLighting=new T(16777215,.1),this.add(this.ambientLighting),this.sunlightOffset=new u(4,10,3),this.sunlight=new L(16777215,1),this.sunlight.castShadow=!0,this.camSize=20,this.sunlight.shadow.camera.near=-this.camSize,this.sunlight.shadow.camera.far=this.camSize*2,this.sunlight.shadow.camera.left=this.camSize,this.sunlight.shadow.camera.right=-this.camSize,this.sunlight.shadow.camera.top=this.camSize,this.sunlight.shadow.camera.bottom=-this.camSize,this.sunlight.shadow.mapSize.width=2048*8,this.sunlight.shadow.mapSize.height=2048*8,this.sunlightTarget=new b,this.sunlight.target=this.sunlightTarget,this.add(this.sunlight),this.add(this.sunlight.target),this.lightHelper=new z(this.sunlight.shadow.camera);const t=new o().load(V);t.wrapS=g,t.wrapT=g,t.repeat.set(12,12),this.ground=new p(new y(50,.001,50),new m({map:t})),this.ground.position.set(0,-.001,0),this.ground.receiveShadow=!0,this.add(this.ground),this.box=new p(new y(2,2,2),new m({color:16711935})),this.box.position.set(3,this.box.scale.y,0),this.box.castShadow=!0,this.add(this.box),this.player=new J,this.add(this.player);const l=new o().load(R),r=new o().load(W),e=new o().load(A),s=new o().load(D),c=new o().load(E),S=new o().load(H),F=[new n({map:l,side:h}),new n({map:r,side:h}),new n({map:e,side:h}),new n({map:s,side:h}),new n({map:S,side:h}),new n({map:c,side:h})];this.skyBox=new p(new y(1e3,1e3,1e3),F),this.add(this.skyBox)}update(){this.player.update(),this.skyBox.position.copy(this.player.camera.position);const t=this.player.controls.getDirection(new u(0,0,0)).multiplyScalar(this.camSize-1);t.y=0,this.sunlight.position.copy(this.player.camera.position),this.sunlight.position.add(t),this.sunlight.position.add(this.sunlightOffset),this.sunlightTarget.position.copy(this.player.camera.position),this.sunlightTarget.position.add(t),this.sunlightTarget.position.sub(this.sunlightOffset)}}const w=new _;w.showPanel(0);document.body.appendChild(w.dom);const i=new q,d=new M({canvas:document.querySelector("#canv")});d.setSize(window.innerWidth,window.innerHeight);d.setPixelRatio(window.devicePixelRatio);d.shadowMap.enabled=!0;d.shadowMap.type=O;document.addEventListener("click",()=>{i.player.controls.lock()});document.addEventListener("keydown",a=>{switch(a.key){case"w":i.player.velocity.y=1;break;case"a":i.player.velocity.x=-1;break;case"s":i.player.velocity.y=-1;break;case"d":i.player.velocity.x=1;break;case" ":i.player.velocity.z=1;break}});document.addEventListener("keyup",a=>{switch(a.key){case"w":i.player.velocity.y=0;break;case"a":i.player.velocity.x=0;break;case"s":i.player.velocity.y=0;break;case"d":i.player.velocity.x=0;break}});function f(){w.begin(),d.render(i,i.player.camera),i.update(),requestAnimationFrame(f),w.end()}f();
